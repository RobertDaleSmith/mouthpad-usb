# Board-specific configuration for April Brothers nRF52840 Dongle
# Based on PCA10059 hardware with Adafruit UF2 Bootloader v0.9.2

# IMPORTANT: This dongle has NO SoftDevice installed (confirmed by INFO_UF2.TXT)
# The UF2 bootloader boots applications directly from 0x1000 (after 4KB MBR)

# Build UF2 for Adafruit bootloader
CONFIG_BUILD_OUTPUT_UF2=y

# Disable the board's default MCUboot configuration
CONFIG_BOOTLOADER_MCUBOOT=n

# Start application at 0x1000 (after MBR) instead of 0x10000 (after MCUboot)
# This must come after BOOTLOADER_MCUBOOT=n to override the default
CONFIG_FLASH_LOAD_OFFSET=0x1000
CONFIG_FLASH_LOAD_SIZE=0xdf000

# Re-enable BT settings with global pm_static.yml
CONFIG_BT_SETTINGS=y

# NVS configuration for storage partition (16KB at 0xdc000 from fstab-stock.dtsi)
CONFIG_SETTINGS_NVS_SECTOR_COUNT=4
CONFIG_SETTINGS_NVS_SECTOR_SIZE_MULT=1

# Hardware stack protection (if available)
CONFIG_HW_STACK_PROTECTION=y