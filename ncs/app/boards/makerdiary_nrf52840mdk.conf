# Board-specific configuration for MakerDiary nRF52840 MDK USB Dongle with Adafruit UF2 Bootloader
# No SoftDevice variant (code starts at 0x1000)
#
# NOTE: Partition layout is defined in pm_static_nrf52840dongle_nrf52840.yml
# NOTE: BOARD_HAS_NRF5_BOOTLOADER=n is set in nrf52840dongle_nrf52840_defconfig

# Dongle variant identifier
CONFIG_DONGLE_VARIANT_STRING="makerdiary_nrf52840mdk"

# NOTE: Button on P0.18 does not work due to UICR being pre-configured as RESET
# The UICR can only be changed with full chip erase using external programmer
# This cannot be done via UF2 bootloader updates
# Users must use CDC console commands (dfu, reset, restart) instead of button

# Build UF2 for Adafruit bootloader
CONFIG_BUILD_OUTPUT_UF2=y

# Disable MCUboot (we're using UF2 bootloader instead)
CONFIG_BOOTLOADER_MCUBOOT=n

# Disable Nordic bootloader support (set in defconfig, reinforced here)
CONFIG_BOARD_HAS_NRF5_BOOTLOADER=n

# Enable BT settings with NVS backend for persistent storage
CONFIG_BT_SETTINGS=y

# NVS backend for settings (required for persistence to flash)
CONFIG_SETTINGS_NVS=y

# NVS configuration for storage partition (64KB at 0xee000 from pm_static)
CONFIG_SETTINGS_NVS_SECTOR_COUNT=8
CONFIG_SETTINGS_NVS_SECTOR_SIZE_MULT=1

# Hardware stack protection
CONFIG_HW_STACK_PROTECTION=y

# Disable display support
CONFIG_DISPLAY=n

# Flash and partition support
CONFIG_FLASH=y
CONFIG_FLASH_PAGE_LAYOUT=y
CONFIG_FLASH_MAP=y
CONFIG_USE_DT_CODE_PARTITION=y
